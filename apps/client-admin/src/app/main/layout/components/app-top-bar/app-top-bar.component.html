<p-toast></p-toast>
<div class="layout-topbar px-2 md:px-4 lg:px-6">
  <div class="px-2 md:px-4 lg:px-6">
    <a class="layout-topbar-logo" routerLink=""> </a>
  </div>
  <!-- <button *ngIf="layoutService.state.staticMenuDesktopInactive == true" #menubutton
    class="p-link layout-menu-button p-button-secondary p-button-outlined" (click)="layoutService.onMenuToggle()">
    <i class="pi pi-bars"></i>
    <img src="assets/images/logos/Icons/menu-2.png" alt="Bars Icon" class="bars-icon layout-menuitem-icon img-fit white-icon p-2 border-round" height="35"/>
  </button> -->
  <button *ngIf="layoutService.state.staticMenuDesktopInactive == true"
    #menubutton
    class="p-link layout-menu-button layout-topbar-button"
    (click)="layoutService.onMenuToggle()"
  >
    <i class="pi pi-bars"></i>
  </button>

  <button #topbarmenubutton class="p-link layout-topbar-menu-button layout-topbar-button"
    (click)="layoutService.showProfileSidebar()">
    <i class="pi pi-ellipsis-v"></i>
  </button>

  <div #topbarmenu class="layout-topbar-menu" [ngClass]="{
      'layout-topbar-menu-mobile-active':
        layoutService.state.profileSidebarVisible
    }">
    <p-avatar icon="pi pi-search" severity="success" styleClass="mr-2 p-link p-3 shadow-1"
      [style]="{ 'background-color': '#ffffff', color: '#4A5468' }"></p-avatar>
    <p-avatar (click)="op.toggle($event)" icon="pi pi-bell" severity="success" styleClass="mr-2 p-link p-3 shadow-1"
      [style]="{ 'background-color': '#ffffff', color: '#4A5468' }"></p-avatar>
    <p-overlayPanel #op [showCloseIcon]="false" [style]="{ width: '450px' }" styleClass="shadow-5 mt-5">
      <ng-template pTemplate>
        <p-table [value]="notificationItems" selectionMode="single" [(selection)]="selectedNotification"
          (onNotificationSelect)="onNotificationSelect($event)" [rows]="10" responsiveLayout="scroll">
          <ng-template pTemplate="header">
            <tr>
              <th class="header-content">
                <strong>NOTIFICATIONS</strong>
                <div class="button-container">
                  <button pButton pRipple label="View all notifications" class="w-full p-button-raised p-button-primary"></button>
                </div>
              </th>
            </tr>
          </ng-template>
          <ng-template pTemplate="body" let-rowData let-notificationItem>
            <tr>
              <td (click)="showModal(notificationItem)">
                <p class="grey-font mb-0 pb-0">
                  <small><strong>{{ notificationItem.subject }}</strong></small>
                </p>
                <p class="text-500 mt-0 pt-0">
                  <small>{{ notificationItem.content }}</small>
                </p>
              </td>
            </tr>
          </ng-template>
        </p-table>
        <button pButton pRipple label="Clear all notifications"
          class="w-full p-button-raised p-button-secondary"></button>
      </ng-template>
    </p-overlayPanel>
    <p-menu #NotificationMenu [popup]="true" [model]="notificationItems"></p-menu>
    <ng-container *ngIf="user | async as nUser">
      <p-chip [label]="nUser.full_name" image="assets/layout/images/myProfilePic-removebg-preview.png" styleClass="mr-2">
      </p-chip>
    </ng-container>
    <hr> <br>
    <button class="p-link" (click)="menu.toggle($event)">
      <i class="pi pi-chevron-down"></i></button><p-menu styleClass="p-2" #menu [popup]="true" [model]="items"></p-menu>
  </div>
</div>
